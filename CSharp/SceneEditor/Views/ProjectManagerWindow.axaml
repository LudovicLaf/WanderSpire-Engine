<!-- File: CSharp/SceneEditor/Views/ProjectManagerWindow.axaml -->
<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="using:SceneEditor.ViewModels"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="600"
        x:Class="SceneEditor.Views.ProjectManagerWindow"
        x:DataType="vm:ProjectManagerViewModel"
        Title="WanderSpire Project Manager"
        Width="800" Height="600"
        MinWidth="600" MinHeight="400"
        WindowStartupLocation="CenterScreen"
        Icon="/Resources/Icons/editor.ico"
        CanResize="false">

	<Grid ColumnDefinitions="250,*">

		<!-- Left Sidebar -->
		<Border Grid.Column="0"
				Background="{DynamicResource SystemRegionBrush}"
				BorderBrush="{DynamicResource SystemBaseMediumBrush}"
				BorderThickness="0,0,1,0">
			<StackPanel Margin="16" Spacing="16">

				<!-- Logo/Title -->
				<StackPanel Spacing="8">
					<TextBlock Text="WanderSpire"
							   FontSize="24"
							   FontWeight="Bold"
							   HorizontalAlignment="Center" />
					<TextBlock Text="Scene Editor"
							   FontSize="14"
							   Foreground="{DynamicResource SystemBaseMediumBrush}"
							   HorizontalAlignment="Center" />
				</StackPanel>

				<!-- Action Buttons -->
				<StackPanel Spacing="8">
					<Button Content="Create New Project"
							Command="{Binding CreateProjectCommand}"
							HorizontalAlignment="Stretch"
							Padding="12,8" />

					<Button Content="Open Project"
							Command="{Binding OpenProjectCommand}"
							HorizontalAlignment="Stretch"
							Padding="12,8" />
				</StackPanel>

				<!-- Recent Projects -->
				<StackPanel Spacing="8" IsVisible="{Binding RecentProjects.Count}">
					<TextBlock Text="Recent Projects" FontWeight="SemiBold" />
					<ScrollViewer MaxHeight="300" VerticalScrollBarVisibility="Auto">
						<ItemsControl ItemsSource="{Binding RecentProjects}">
							<ItemsControl.ItemTemplate>
								<DataTemplate>
									<Border Background="Transparent"
											Padding="8,4"
											Margin="0,1"
											CornerRadius="4">
										<Border.Styles>
											<Style Selector="Border:pointerover">
												<Setter Property="Background" Value="{DynamicResource SystemListLowBrush}" />
											</Style>
										</Border.Styles>

										<StackPanel>
											<TextBlock Text="{Binding Name}" FontWeight="Medium" />
											<TextBlock Text="{Binding Path}"
													   FontSize="11"
													   Foreground="{DynamicResource SystemBaseMediumBrush}"
													   TextTrimming="CharacterEllipsis" />
											<TextBlock Text="{Binding LastOpened, StringFormat='Last opened: {0:MM/dd/yyyy}'}"
													   FontSize="10"
													   Foreground="{DynamicResource SystemBaseMediumBrush}" />
										</StackPanel>
									</Border>
								</DataTemplate>
							</ItemsControl.ItemTemplate>
						</ItemsControl>
					</ScrollViewer>
				</StackPanel>

			</StackPanel>
		</Border>

		<!-- Main Content -->
		<Grid Grid.Column="1">

			<!-- New Project View -->
			<ScrollViewer IsVisible="{Binding !IsProjectOpen}">
				<StackPanel Margin="32" Spacing="24" MaxWidth="500">

					<TextBlock Text="Create New Project"
							   FontSize="20"
							   FontWeight="SemiBold" />

					<!-- Project Details -->
					<StackPanel Spacing="12">
						<StackPanel Spacing="4">
							<TextBlock Text="Project Name" />
							<TextBox Text="{Binding ProjectName}"
									 Watermark="Enter project name..." />
						</StackPanel>

						<StackPanel Spacing="4">
							<TextBlock Text="Location" />
							<DockPanel>
								<Button DockPanel.Dock="Right"
										Content="Browse"
										Command="{Binding BrowseProjectPathCommand}"
										Margin="8,0,0,0" />
								<TextBox Text="{Binding ProjectPath}"
										 Watermark="Select project location..."
										 IsReadOnly="True" />
							</DockPanel>
						</StackPanel>

						<StackPanel Spacing="4">
							<TextBlock Text="Template" />
							<ComboBox ItemsSource="{Binding ProjectTemplates}"
									  SelectedValue="{Binding SelectedTemplate}"
									  DisplayMemberBinding="{Binding Name}"
									  HorizontalAlignment="Stretch" />
						</StackPanel>
					</StackPanel>

					<!-- Template Description -->
					<Border Background="{DynamicResource SystemRegionBrush}"
							BorderBrush="{DynamicResource SystemBaseMediumBrush}"
							BorderThickness="1"
							CornerRadius="4"
							Padding="16"
							IsVisible="{Binding SelectedTemplate, Converter={x:Static ObjectConverters.IsNotNull}}">
						<StackPanel Spacing="8">
							<TextBlock Text="{Binding SelectedTemplate.Name}"
									   FontWeight="SemiBold" />
							<TextBlock Text="{Binding SelectedTemplate.Description}"
									   TextWrapping="Wrap"
									   Foreground="{DynamicResource SystemBaseMediumBrush}" />
						</StackPanel>
					</Border>

					<!-- Action Buttons -->
					<DockPanel>
						<Button DockPanel.Dock="Right"
								Content="Create Project"
								Command="{Binding CreateProjectCommand}"
								IsDefault="True"
								Padding="16,8" />
						<Panel />
					</DockPanel>

				</StackPanel>
			</ScrollViewer>

			<!-- Project Open View -->
			<StackPanel IsVisible="{Binding IsProjectOpen}"
						Margin="32"
						Spacing="24"
						VerticalAlignment="Center"
						HorizontalAlignment="Center">

				<TextBlock Text="Project Ready"
						   FontSize="24"
						   FontWeight="SemiBold"
						   HorizontalAlignment="Center" />

				<StackPanel Spacing="8" HorizontalAlignment="Center">
					<TextBlock Text="{Binding CurrentProject.Name}"
							   FontSize="18"
							   HorizontalAlignment="Center" />
					<TextBlock Text="{Binding CurrentProject.Path}"
							   Foreground="{DynamicResource SystemBaseMediumBrush}"
							   HorizontalAlignment="Center" />
				</StackPanel>

				<Button Content="Open Scene Editor"
						Click="OpenSceneEditor_Click"
						HorizontalAlignment="Center"
						Padding="24,12"
						FontSize="16" />

			</StackPanel>

		</Grid>
	</Grid>

</Window>